<section class="inventory-dialog">
  <header class="dialog-header">
    <div class="dialog-icon dialog-icon--danger">
      <i class="bi bi-exclamation-octagon"></i>
    </div>
    <div>
      <h2 mat-dialog-title class="dialog-title">Eliminar cantidad</h2>
      <p class="dialog-subtitle">
        Variante <strong>{{ data.nombre }}</strong> · Stock actual: {{ data.stock }}
      </p>
    </div>
  </header>

  <div mat-dialog-content class="dialog-content">
    <form [formGroup]="formulario" class="d-flex flex-column gap-3">
      <mat-form-field appearance="outline">
        <mat-label>Cantidad a eliminar</mat-label>
        <input matInput type="number" min="1" [max]="data.stock" step="1" formControlName="cantidad" />
        <mat-error *ngIf="formulario.get('cantidad')?.hasError('required')">Este campo es obligatorio.</mat-error>
        <mat-error *ngIf="formulario.get('cantidad')?.hasError('min')">Debe ser al menos 1.</mat-error>
        <mat-error *ngIf="formulario.get('cantidad')?.hasError('max')">
          No puedes eliminar más de {{ data.stock }} unidades.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Observación</mat-label>
        <textarea
          matInput
          rows="3"
          formControlName="observacion"
          maxlength="250"
          placeholder="Describe por qué se retira stock de este lote"
        ></textarea>
        <mat-error *ngIf="formulario.get('observacion')?.hasError('required')">
          Debes indicar el motivo del retiro.
        </mat-error>
        <mat-error *ngIf="formulario.get('observacion')?.hasError('maxlength')">
          El comentario no puede superar los 250 caracteres.
        </mat-error>
      </mat-form-field>
    </form>
  </div>

  <div mat-dialog-actions class="dialog-actions">
    <button type="button" class="dialog-btn dialog-btn--ghost" (click)="cancelar()">Cancelar</button>
    <button type="button" class="dialog-btn dialog-btn--danger" (click)="guardar()">Eliminar</button>
  </div>
</section>
