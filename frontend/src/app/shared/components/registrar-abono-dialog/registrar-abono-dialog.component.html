<section class="inventory-dialog registrar-abono-dialog">
  <header class="dialog-header">
    <div class="dialog-icon">
      <i class="bi bi-piggy-bank"></i>
    </div>
    <div>
      <p class="dialog-kicker text-uppercase">Cartera</p>
      <h2 mat-dialog-title class="dialog-title">Registrar abono</h2>
      <p class="dialog-subtitle">Aplica un pago parcial y deja constancia de la observación que necesites.</p>
    </div>
  </header>

  <div mat-dialog-content class="dialog-content">
    <div class="client-summary">
      <p class="client-summary__label">Cliente</p>
      <p class="client-summary__name">{{ data.clienteNombre }}</p>
    </div>
    <form [formGroup]="formulario" class="dialog-form">
      <mat-form-field appearance="outline">
        <mat-label>Monto</mat-label>
        <input
          matInput
          type="number"
          formControlName="monto"
          min="0"
          step="1000"
          placeholder="Valor del abono"
        />
        <mat-error *ngIf="formulario.get('monto')?.hasError('required')">El monto es obligatorio.</mat-error>
        <mat-error *ngIf="formulario.get('monto')?.hasError('min')">Ingresa un monto mayor a cero.</mat-error>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Observación (opcional)</mat-label>
        <textarea matInput rows="3" formControlName="observacion" placeholder="Detalle del abono"></textarea>
        <mat-hint align="end">{{ formulario.value.observacion?.length || 0 }}/255</mat-hint>
        <mat-error *ngIf="formulario.get('observacion')?.hasError('maxlength')">
          La observación no puede superar 255 caracteres.
        </mat-error>
      </mat-form-field>
    </form>
  </div>

  <div mat-dialog-actions class="dialog-actions">
    <button type="button" class="dialog-btn dialog-btn--ghost dialog-btn--compact" (click)="cancelar()">Cancelar</button>
    <button type="button" class="dialog-btn dialog-btn--primary dialog-btn--compact" (click)="confirmar()">
      Registrar
    </button>
  </div>
</section>
