<nav class="app-header shadow">
  <div class="header-inner">
    <a class="brand" routerLink="/">
      <span class="brand-mark">S</span>
      <span class="brand-copy">
        <span class="brand-title">SICOIL</span>
        <span class="brand-subtitle">Operaciones y control</span>
      </span>
    </a>

    <ng-container *ngIf="usuario$ | async as usuario; else loginLink">
      <div class="nav-content">
        <ul class="nav-links">
          <li *ngFor="let link of links">
            <a
              [routerLink]="link.path"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: true }"
            >
              {{ link.label }}
            </a>
          </li>
        </ul>

        <div class="session-info">
          <div class="date-chip">
            <span>{{ today | date: 'mediumDate' }}</span>
          </div>
          <div class="user-pill">
            <span class="dot"></span>
            <span class="user-name">{{ usuario.usuario }}</span>
          </div>
          <button
            class="btn-logout"
            type="button"
            (click)="cerrarSesion()"
            [disabled]="cerrandoSesion"
          >
            {{ cerrandoSesion ? 'Cerrando...' : 'Cerrar sesión' }}
          </button>
        </div>
      </div>
    </ng-container>

    <ng-template #loginLink>
      <div class="nav-content">
        <div class="session-info">
          <div class="date-chip">
            <span>{{ today | date: 'mediumDate' }}</span>
          </div>
          <a class="btn-logout" routerLink="/login">Iniciar sesión</a>
        </div>
      </div>
    </ng-template>
  </div>
</nav>
